<!DOCTYPE html>
<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Triggers &amp; Events | AireFlow Docs</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Triggers &amp; Events" />
<meta name="author" content="Andy Goldfinch" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A trigger is what defines when a task should be created. When an event happens, AireFlow will create an instance of every task that is defined with a relevant trigger. A trigger is relevant if it matches the type and key of the event. There are two main types of event that can trigger tasks to be created, custom events and task events." />
<meta property="og:description" content="A trigger is what defines when a task should be created. When an event happens, AireFlow will create an instance of every task that is defined with a relevant trigger. A trigger is relevant if it matches the type and key of the event. There are two main types of event that can trigger tasks to be created, custom events and task events." />
<link rel="canonical" href="https://docs.aireflow.co.uk/docs/triggers/" />
<meta property="og:url" content="https://docs.aireflow.co.uk/docs/triggers/" />
<meta property="og:site_name" content="AireFlow Docs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-02T11:27:58+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Triggers &amp; Events" />
<script type="application/ld+json">
{"description":"A trigger is what defines when a task should be created. When an event happens, AireFlow will create an instance of every task that is defined with a relevant trigger. A trigger is relevant if it matches the type and key of the event. There are two main types of event that can trigger tasks to be created, custom events and task events.","headline":"Triggers &amp; Events","dateModified":"2023-02-02T11:27:58+00:00","datePublished":"2023-02-02T11:27:58+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://docs.aireflow.co.uk/docs/triggers/"},"url":"https://docs.aireflow.co.uk/docs/triggers/","author":{"@type":"Person","name":"Andy Goldfinch"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:image" content="https://docs.aireflow.co.uk/assets/posts/"/>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png" >
  <link rel="alternate" type="application/rss+xml" title="AireFlow Docs" href="/feed.xml">
  <script src="/assets/js/main.js"></script>
  
</head>

    <body>
    <header class="uk-background-secondary">
    <div data-uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky" class="uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 1904px;">
        <nav class="uk-navbar-container">
            <div class="uk-container">
    <div data-uk-navbar>
        <div class="uk-navbar-left">
            <a class="uk-navbar-item uk-logo uk-visible@m" href="/"></a>
            
              <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas-docs" data-uk-navbar-toggle-icon data-uk-toggle></a>
            

        </div>
        <div class="uk-navbar-center uk-hidden@m">
            <a class="uk-navbar-item uk-logo" href="/"></a>
        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@m">
                
                    
                    
                    
                        <li><a href="/docs/getting-started/" >Getting Started</a></li>
                    
                
                    
                    
                    
                        <li><a href="/changelog/" >Changelog</a></li>
                    
                
                    
                    
                    
                        <li><a href="https://www.airelogic.com/" target="_blank" >About Airelogic</a></li>
                    
                
            </ul>

            
            <div>
                <a class="uk-navbar-toggle" uk-search-icon href="#"></a>
                <div class="uk-drop uk-background-default uk-border-rounded" uk-drop="mode: click; pos: left-center; offset: 0">
                    <form class="uk-search uk-search-navbar uk-width-1-1" onsubmit="return false;">
                        <input id="navbar-search" class="uk-search-input" type="search" placeholder="Search..." autofocus>
                    </form>
                    <ul id="navbar-search-results" class="uk-position-absolute uk-width-1-1 uk-list"></ul>
                </div>
            </div>
            <script>
            SimpleJekyllSearch({
                searchInput: document.getElementById('navbar-search'),
                resultsContainer: document.getElementById('navbar-search-results'),
                noResultsText: '<li>No results found</li>',
                searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
                json: '/search.json'
            });
            </script>
            

            
              <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-navbar-toggle-icon data-uk-toggle></a>
            


        </div>
    </div>
</div>

        </nav>
    </div>
</header>


    

    <div class="uk-section">
    <div class="uk-container">
        <div class="uk-grid-large" data-uk-grid>

            <div class="sidebar-fixed-width uk-visible@m">
                <div class="sidebar-docs uk-position-fixed">
                    
                    <h5>Getting Started</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/getting-started/">Getting Started with AireFlow</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/terminology/">AireFlow Terminology</a></li>
                    
                    </ul>
                    
                    <h5>Workflow Definitions</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/workflow-definitions/">Workflow Definitions</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/mapping/">Mapping with XPath and Liquid</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/task-keys/">Task Keys</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/task-types/">Task Types</a></li>
                    
                      
                      
                      <li class="uk-active"><a href="/docs/triggers/">Triggers & Events</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/mutations/">Mutations</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/import-export/">Importing & Exporting Workflow Definitions</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/git-import/">Importing from a Git Repository</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/versioning/">Versioning</a></li>
                    
                    </ul>
                    
                    <h5>Task Instances</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/updating-tasks/">Updating Task Instances</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/task-statuses/">Task Statuses</a></li>
                    
                    </ul>
                    
                    <h5>GraphQL</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/graphql-api-definition/">GraphQL API Definition</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/graphql-api-explorer/">GraphQL API Explorer</a></li>
                    
                    </ul>
                    
                    <h5>RBAC</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/rbac/">RBAC</a></li>
                    
                    </ul>
                    
                </div>
            </div>

            <div class="uk-width-1-1 uk-width-expand@m">

                <article class="uk-article">

                    <h1 class="uk-article-title">Triggers &amp; Events</h1>

                    <p class="subtitle uk-text-lead uk-text-muted">Starting a Workflow</p>

                    <div class="uk-article-meta uk-margin-top uk-margin-medium-bottom">
                        





<time datetime="2023-02-02T11:27:58+00:00" itemprop="datePublished">
    
    Feb 2, 2023
</time>

                    </div>

                    <div class="article-content">
                        <p>A trigger is what defines when a task should be created. When an event happens, AireFlow will create an instance of every task that is defined with a relevant trigger. A trigger is relevant if it matches the type and key of the event. There are two main types of event that can trigger tasks to be created, custom events and task events.</p>

<h2 id="custom-events">Custom Events</h2>
<p>A custom event is an event published via the api, with an associated routing key.</p>

<h3 id="event-definitions">Event Definitions</h3>
<p>To trigger a task based on a custom event, define your event with a name and routing key via the Event Definitions page. Note that once a key is set it cannot be changed, so you will need to create a new event definition and re-add it to any triggers if your key needs to be changed.</p>

<p>The event definitions page can also be used to test workflows by manually firing events that would otherwise come from outside AireFlow.</p>

<h3 id="publishing-custom-events">Publishing Custom Events</h3>
<p>Custom events are published via an HTTP POST request to <code class="language-plaintext highlighter-rouge">https://{Your AireFlow Host}/Api/Event/{routingKey}/{subjectId}</code>. The routing key is required, as it uniquely identifies the event and is the part of the event that a trigger has a reference to. The subject ID in the URL is optional, because it can also be specified in your workflow definition.</p>

<h3 id="forms4health-integration">Forms4Health Integration</h3>
<p>Custom event triggers can be used as a way of directing the output of <a href="https://forms4health.com">AireForms/forms4health</a> into a Workflow. The AireFlow plugin is built into forms4health, so as long as it’s enabled for the environment you’re using, collecting the output of a form can be accomplished simply by using the correct routing key. The associated task will be triggered with the form XML as its context. When a forms4health form is submitted, the routing key is set by convention as <code class="language-plaintext highlighter-rouge">{FORM_KEY}-{VERSION}</code>. For example, if you had version <code class="language-plaintext highlighter-rouge">3</code> of a form with key <code class="language-plaintext highlighter-rouge">about-me</code>, then the routing key you should use in the Event Definition is <code class="language-plaintext highlighter-rouge">about-me-3</code>. This custom event can then be added to a workflow definition as a trigger.</p>

<p>In forms4health, if the form is a single pass form then the AireFlow delivery channel should be used. Whereas, if it’s a clinician form it can use the built in AireFlow plugin. Both methods rely on some configuration in the environment variables. For more information about this, please take a look at the <a href="https://docs.forms4health.com/">forms4health documentation</a>.</p>

<h2 id="task-events">Task Events</h2>
<p>Task events are created by AireFlow itself, whenever task instances are created or updated. There are several specific types of task event.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Event</th>
      <th style="text-align: left">When does it happen?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Task Instantiated</td>
      <td style="text-align: left">Every time a task is created.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Assigned</td>
      <td style="text-align: left">Every time the assignee of a task is changed.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Started</td>
      <td style="text-align: left">Whenever the status of a task is changed to  <code class="language-plaintext highlighter-rouge">In Progress</code>. If the Task is moved from <code class="language-plaintext highlighter-rouge">New</code> directly to  <code class="language-plaintext highlighter-rouge">Completed</code>, this event will not happen.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Completed</td>
      <td style="text-align: left">When the status of a task is changed to <code class="language-plaintext highlighter-rouge">Completed</code>.  This event occurs automatically for notification tasks, after the notification is sent.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Failed</td>
      <td style="text-align: left">When the status of a task is changed to <code class="language-plaintext highlighter-rouge">Failed</code>.  This event also occurs automatically for notification tasks, when a notification fails to be sent and all retry attempts have also failed.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Cancelled</td>
      <td style="text-align: left">Whenever the status of a task is changed to <code class="language-plaintext highlighter-rouge">Cancelled</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left">Task Blocked</td>
      <td style="text-align: left">When the status of a task is changed to <code class="language-plaintext highlighter-rouge">Blocked</code>.</td>
    </tr>
  </tbody>
</table>

                        <div class="share uk-text-center">
    <a href="https://twitter.com/intent/tweet?text=Triggers & Events&url=https://docs.aireflow.co.uk/docs/triggers/&via=airelogic&related=airelogic" rel="nofollow" target="_blank" title="Share on Twitter" onclick="window.open(this.href, 'twitter', 'width=550,height=235');return false;"><span data-uk-icon="icon: twitter; ratio: 1.2"></span></a>
    <a  class="uk-margin-small-left" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdocs.aireflow.co.uk%2Fdocs%2Ftriggers%2F" rel="nofollow" target="_blank" title="Share on Facebook" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"><span data-uk-icon="icon: facebook; ratio: 1.2"></span></a>
</div>

                    </div>

                    <hr class="uk-margin-medium">

                    


  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="uk-pagination uk-margin-top">
          
            
            
            <li><a class="hvr-back" href="/docs/task-types/">&larr; Previous</a></li>
          
          
            
            
            <li class="uk-margin-auto-left"><a class="hvr-forward" href="/docs/mutations/">Next &rarr;</a></li>
          
    </ul>
    


                    <div class="uk-margin-large-top">
    <h3>Related Articles</h3>

    
    
    

    <ul class="uk-list">
    

    
    

    

    
        <li><a href="/docs/getting-started/">Getting Started with AireFlow</a></li>
        
        
    

    

    
    

    

    
        <li><a href="/docs/git-import/">Importing from a Git Repository</a></li>
        
        
    

    

    
    

    

    
        <li><a href="/docs/graphql-api-definition/">GraphQL API Definition</a></li>
        
        
    

    

    
    

    

    
        <li><a href="/docs/graphql-api-explorer/">GraphQL API Explorer</a></li>
        
        
            
    </ul>
</div>


                    
                </article>

                <div>
                    <div class="uk-section uk-text-center uk-link-muted">
    <div class="uk-margin-medium uk-text-small">
        <div></div>
        <div></div> 
    </div> 
</div>

                </div>

                <script>
                    // Table of contents scroll to
                    UIkit.scroll('#markdown-toc a', {
                        duration: 400,
                        offset: 120
                    });
                </script>

            </div>

    </div>
</div>


    <div id="offcanvas-docs" data-uk-offcanvas="overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        
        <h5 class="uk-margin-top">Getting Started</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/getting-started/">Getting Started with AireFlow</a></li>
        
          
          
          <li class=""><a href="/docs/terminology/">AireFlow Terminology</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Workflow Definitions</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/workflow-definitions/">Workflow Definitions</a></li>
        
          
          
          <li class=""><a href="/docs/mapping/">Mapping with XPath and Liquid</a></li>
        
          
          
          <li class=""><a href="/docs/task-keys/">Task Keys</a></li>
        
          
          
          <li class=""><a href="/docs/task-types/">Task Types</a></li>
        
          
          
          <li class="uk-active"><a href="/docs/triggers/">Triggers & Events</a></li>
        
          
          
          <li class=""><a href="/docs/mutations/">Mutations</a></li>
        
          
          
          <li class=""><a href="/docs/import-export/">Importing & Exporting Workflow Definitions</a></li>
        
          
          
          <li class=""><a href="/docs/git-import/">Importing from a Git Repository</a></li>
        
          
          
          <li class=""><a href="/docs/versioning/">Versioning</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Task Instances</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/updating-tasks/">Updating Task Instances</a></li>
        
          
          
          <li class=""><a href="/docs/task-statuses/">Task Statuses</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">GraphQL</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/graphql-api-definition/">GraphQL API Definition</a></li>
        
          
          
          <li class=""><a href="/docs/graphql-api-explorer/">GraphQL API Explorer</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">RBAC</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/rbac/">RBAC</a></li>
        
        </ul>
        

    </div>
</div>


    <div id="offcanvas" data-uk-offcanvas="flip: true; overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        <ul class="uk-nav uk-nav-default">
            <li><a class="uk-logo uk-margin-small-bottom" href="/"></a></li>
            
                
            <li><a href="https://docs.aireflow.co.uk/docs/getting-started/" >Getting Started</a></li>
            
                
            <li><a href="https://docs.aireflow.co.uk/changelog/" >Changelog</a></li>
            
                
            <li><a href="https://www.airelogic.com/" target="_blank" >About Airelogic</a></li>
            
        </ul>

        <div class="uk-margin-small-top uk-text-center uk-text-muted uk-link-muted">
            <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">
                













            </div>
        </div>

    </div>
</div>


    

    </body>

</html>
